const t=(t,e)=>{if(e<=0)throw new Error("Size must be greater than zero.");const r=[];for(let n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r};class e{dims;buffer;constructor(t,e){return this.buffer=t,this.dims=e,this}toJSON(){return this.normal()}normal(){let e=Array.from(this.buffer);for(let r=this.dims.length-1;r>0;--r)e=t(e,this.dims[r]);return e}static Q(t){return t instanceof e}}window.NumericArrayObject=e;class r{constructor(t,e){this.re=t,this.im=e}static isComplex(t){return t instanceof r}add(t){return new r(this.re+t.re,this.im+t.im)}subtract(t){return new r(this.re-t.re,this.im-t.im)}multiply(t){const e=this.re*t.re-this.im*t.im,n=this.re*t.im+this.im*t.re;return new r(e,n)}divide(t){const e=t.re**2+t.im**2,n=(this.re*t.re+this.im*t.im)/e,i=(this.im*t.re-this.re*t.im)/e;return new r(n,i)}}function n(t){return/^-?\d+$/.test(t)}const i=new RegExp(/^(-?\d+)(.?\d*)(\*\^)?(\d*)/);window.Complex=r,window.Deferred=class{promise={};reject={};resolve={};constructor(){this.promise=new Promise(((t,e)=>{this.reject=e,this.resolve=t}))}},window.aflatten=t=>t.flat(1/0),window.isNumeric=n;var o=(t,e={})=>{if(void 0===t)return console.log("undefined object"),t;const r="string"==typeof t;if(r){if("'"==t.charAt(0))return t.slice(1,-1);if(n(t))return parseInt(t);if(i.test(t)){console.log(t);let[e,r,n,o,a]=t.split(i);return r+="."===n?n+"0":n,o&&(r+="E"+a),console.log(r),parseFloat(r)}}if("number"==typeof t)return t;if(!(t instanceof Array||r))return t;let a,s;if(r?(a=t,s=void 0):(a=t[0],s=t.slice(1,t.length)),"scope"in e&&a in e.scope)return e.scope[a](s,e);if("context"in e)if(Array.isArray(e.context)){for(let r=0;r<e.context.length;++r)if(a in e.context[r]){if(e.method)return e.context[r][a][e.method]?e.context[r][a][e.method](s,e):console.error("method "+e.method+" is not defined for "+a);if("virtual"in e.context[r][a]&&!e.novirtual){const n=new l("virtual-"+u(),e,t);let i=n.assignScope();return console.log("virtual env"),n.firstName=a,e.context[r][a](s,i)}return e.context[r][a](s,e)}}else if(a in e.context){if(e.method)return e.context[a][e.method]?e.context[a][e.method](s,e):console.error("method "+e.method+" is not defined for "+a);if("virtual"in e.context[a]&&!e.novirtual){const r=new l("virtual-"+u(),e,t);let n=r.assignScope();return console.log("virtual env"),r.firstName=a,e.context[a](s,n)}return e.context[a](s,e)}const c=o.contextes;for(let r=0;r<c.length;++r)if(a in c[r]){if(e.method)return c[r][a][e.method]?c[r][a][e.method](s,e):console.error("method "+e.method+" is not defined for "+a);if("virtual"in c[r][a]&&!e.novirtual){const n=new l("virtual-"+u(),e,t);let i=n.assignScope();return console.log("virtual env"),n.firstName=a,c[r][a](s,i)}return c[r][a](s,e)}return o.anonymous(t,e)};const a=function(t){return t.split("").reduce((function(t,e){return 0|(t=(t<<5)-t+e.charCodeAt(0))}),0)};let s;o.hash=t=>{if(void 0===t)return console.log("undefined object"),a("undefined");const e="string"==typeof t;if(e){if("'"==t.charAt(0))return a(t.slice(1,-1));if(n(t))return a(String(parseInt(t)));if(i.test(t)){console.log(t);let[e,r,n,o,s]=t.split(i);return r+="."===n?n+"0":n,o&&(r+="E"+s),console.log(r),a(String(parseFloat(r)))}}return"number"==typeof t?a(String(t)):t instanceof Array||e?e?a(t):t.map((t=>o.hash(t))).reduce(((t,e)=>t+e),0):a(String(t))},o.cnt=0,o.contextes=[],o.contextExpand=t=>{console.log(t.name+" was added to the contextes of the interpreter"),o.contextes.push(t)},o.shared={},o.shared=class{constructor(t,e){this.key=t;const r=this;r.load=async()=>{await e(r),r.load=async()=>{console.log("Already loaded!")}},o.shared[t]=this}},o.handleMessage=t=>{const e={call:Math.floor(100*Math.random())};o(JSON.parse(t.data),{global:e})},o.unzlib64String=async t=>{s||(s=(await Promise.resolve().then((function(){return _}))).unzlibSync);const e=atob(t);return(new TextDecoder).decode(s(Uint8Array.from(e,(t=>t.charCodeAt(0)))))},o.anonymous=async(t,e)=>{throw"Unknown symbol "+JSON.stringify(t)};var c={};window.InstancesHashMap=c;class l{env={};uid="";instance="";dead=!1;virtual=!1;local={};assignScope(){return this.env.local=this.local,this.env}async execute(t){return o(this.virtual,t?{...this.env,...t}:this.env)}dispose(){if(this.dead)return;if(this.dead=!0,console.log("DESTORY: "+this.uid),this.static)return void delete c[this.instance];this.env.method="destroy";let t=this.virtual;this.env.local=this.local,o(t,this.env),delete c[this.instance]}update(t){if(this.parent instanceof l&&!(this.child instanceof l))return this.parent.update();let e;return this.env.method="update",this.env.local=this.local,e=this.virtual?this.virtual:this.storage.get(this.uid),o(e,this.env)}constructor(t,e,r=!1,n=!1){if(this.static=n,this.uid=t,this.env={...e,exposed:e},this.instance=u(),this.env.element=this.env.element||"body",this.env.global.stack=this.env.global.stack||{},this.env.global.stack[t]=this,this.env.root=this.env.root||{},this.local.middleware=t=>t,r?this.virtual=r:(t in ObjectHashMap?this.storage=ObjectHashMap[t]:this.storage=new ObjectStorage(t),this.storage.assign(this)),this.env.root instanceof l&&!this.env.static&&(this.env.root.static||(this.parent=this.env.root,this.env.root.child=this)),this.env.root=this,c[this.instance]=this,this.env.global.hooks){const t=this;this.env.global.hooks.forEach((e=>{e(t)}))}return this}}function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}window.ExecutableObject=l,window.uuidv4=u,window.downloadByURL=function(t,e){var r=document.createElement("a");r.setAttribute("href",t),r.setAttribute("download",e),r.click(),r.remove()};window.setInnerHTML=function(t,e){return t.innerHTML=e,Array.from(t.querySelectorAll("script")).forEach((t=>{const e=document.createElement("script");Array.from(t.attributes).forEach((t=>e.setAttribute(t.name,t.value))),e.appendChild(document.createTextNode(t.innerHTML)),t.parentNode.replaceChild(e,t)})),t},window.setInnerHTMLAsync=async function(t,e){return t.innerHTML=e,Array.from(t.querySelectorAll("script")).forEach((t=>{const e=document.createElement("script");Array.from(t.attributes).forEach((t=>e.setAttribute(t.name,t.value))),e.src||"module"!=e.type?e.appendChild(document.createTextNode(t.innerHTML)):(e.removeAttribute("type"),e.appendChild(document.createTextNode("{\n"+t.innerHTML+"\n}"))),t.parentNode.replaceChild(e,t)})),t},window.openawindow=function(t,e="_self"){const r=document.createElement("a");r.target=e,r.href=t,r.click()},o.throttle=30,window.throttle=function(t,e=()=>o.throttle){let r,n=!1;const i=()=>{null==r?n=!1:(t(...r),r=null,setTimeout(i,e()))};return(...o)=>{n?r=o:(t(...o),n=!0,setTimeout(i,e()))}},window.interpretate=o;var h=Uint8Array,d=Uint16Array,f=Int32Array,v=new h([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),m=new h([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),w=new h([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),p=function(t,e){for(var r=new d(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];var i=new f(r[30]);for(n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)i[o]=o-r[n]<<5|n;return{b:r,r:i}},x=p(v,2),g=x.b,b=x.r;g[28]=258,b[258]=28;for(var y=p(m,0).b,A=new d(32768),S=0;S<32768;++S){var E=(43690&S)>>1|(21845&S)<<1;E=(61680&(E=(52428&E)>>2|(13107&E)<<2))>>4|(3855&E)<<4,A[S]=((65280&E)>>8|(255&E)<<8)>>1}var T=function(t,e,r){for(var n=t.length,i=0,o=new d(e);i<n;++i)t[i]&&++o[t[i]-1];var a,s=new d(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;if(r){a=new d(1<<e);var c=15-e;for(i=0;i<n;++i)if(t[i])for(var l=i<<4|t[i],u=e-t[i],h=s[t[i]-1]++<<u,f=h|(1<<u)-1;h<=f;++h)a[A[h]>>c]=l}else for(a=new d(n),i=0;i<n;++i)t[i]&&(a[i]=A[s[t[i]-1]++]>>15-t[i]);return a},k=new h(288);for(S=0;S<144;++S)k[S]=8;for(S=144;S<256;++S)k[S]=9;for(S=256;S<280;++S)k[S]=7;for(S=280;S<288;++S)k[S]=8;var M=new h(32);for(S=0;S<32;++S)M[S]=5;var N=T(k,9,1),O=T(M,5,1),j=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},H=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(7&e)&r},z=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(7&e)},C=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],L=function(t,e,r){var n=new Error(e||C[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,L),!r)throw n;return n},I=function(t,e,r,n){var i=t.length,o=n?n.length:0;if(!i||e.f&&!e.l)return r||new h(0);var a=!r,s=a||2!=e.i,c=e.i;a&&(r=new h(3*i));var l=function(t){var e=r.length;if(t>e){var n=new h(Math.max(2*e,t));n.set(r),r=n}},u=e.f||0,d=e.p||0,f=e.b||0,p=e.l,x=e.d,b=e.m,A=e.n,S=8*i;do{if(!p){u=H(t,d,1);var E=H(t,d+1,3);if(d+=3,!E){var k=t[(P=4+((d+7)/8|0))-4]|t[P-3]<<8,M=P+k;if(M>i){c&&L(0);break}s&&l(f+k),r.set(t.subarray(P,M),f),e.b=f+=k,e.p=d=8*M,e.f=u;continue}if(1==E)p=N,x=O,b=9,A=5;else if(2==E){var C=H(t,d,31)+257,I=H(t,d+10,15)+4,U=C+H(t,d+5,31)+1;d+=14;for(var D=new h(U),_=new h(19),F=0;F<I;++F)_[w[F]]=H(t,d+3*F,7);d+=3*I;var J=j(_),R=(1<<J)-1,q=T(_,J,1);for(F=0;F<U;){var P,B=q[H(t,d,R)];if(d+=15&B,(P=B>>4)<16)D[F++]=P;else{var Q=0,Y=0;for(16==P?(Y=3+H(t,d,3),d+=2,Q=D[F-1]):17==P?(Y=3+H(t,d,7),d+=3):18==P&&(Y=11+H(t,d,127),d+=7);Y--;)D[F++]=Q}}var $=D.subarray(0,C),G=D.subarray(C);b=j($),A=j(G),p=T($,b,1),x=T(G,A,1)}else L(1);if(d>S){c&&L(0);break}}s&&l(f+131072);for(var K=(1<<b)-1,V=(1<<A)-1,W=d;;W=d){var X=(Q=p[z(t,d)&K])>>4;if((d+=15&Q)>S){c&&L(0);break}if(Q||L(2),X<256)r[f++]=X;else{if(256==X){W=d,p=null;break}var Z=X-254;if(X>264){var tt=v[F=X-257];Z=H(t,d,(1<<tt)-1)+g[F],d+=tt}var et=x[z(t,d)&V],rt=et>>4;et||L(3),d+=15&et;G=y[rt];if(rt>3){tt=m[rt];G+=z(t,d)&(1<<tt)-1,d+=tt}if(d>S){c&&L(0);break}s&&l(f+131072);var nt=f+Z;if(f<G){var it=o-G,ot=Math.min(G,nt);for(it+f<0&&L(3);f<ot;++f)r[f]=n[it+f]}for(;f<nt;++f)r[f]=r[f-G]}}e.l=p,e.p=W,e.b=f,e.f=u,p&&(u=1,e.m=b,e.d=x,e.n=A)}while(!u);return f!=r.length&&a?function(t,e,r){return(null==e||e<0)&&(e=0),(null==r||r>t.length)&&(r=t.length),new h(t.subarray(e,r))}(r,0,f):r.subarray(0,f)},U=new h(0);var D="undefined"!=typeof TextDecoder&&new TextDecoder;try{D.decode(U,{stream:!0})}catch(t){}var _=Object.freeze({__proto__:null,unzlibSync:function(t,e){return I(t.subarray((r=t,n=e&&e.dictionary,(8!=(15&r[0])||r[0]>>4>7||(r[0]<<8|r[1])%31)&&L(6,"invalid zlib data"),(r[1]>>5&1)==+!n&&L(6,"invalid zlib data: "+(32&r[1]?"need":"unexpected")+" dictionary"),2+(r[1]>>3&4)),-4),{i:2},e&&e.out,e&&e.dictionary);var r,n}});
